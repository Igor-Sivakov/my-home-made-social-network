"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[438],{4438:function(e,n,i){i.r(n),i.d(n,{default:function(){return z}});var r=i(1413),s=i(885),t=i(2791),a=i(6731),l=i(7256),o=function(e){return e.usersPage.usersData},c=function(e){return e.usersPage.pageSize},f=function(e){return e.usersPage.totalUsersCount},u=function(e){return e.usersPage.setCurrentPage},d=function(e){return e.usersPage.isFetching},m=function(e){return e.usersPage.followingInProgress},_=function(e){return e.usersPage.filter},g=i(4014),h=i(6482),p=i(8109),x=i(2506),j=i(184),v=function(e){return{}},b=(0,t.memo)((function(e){var n=(0,h.C)(_);return(0,j.jsx)("section",{className:"find-friends__search-form__container",children:(0,j.jsx)(x.J9,{enableReinitialize:!0,initialValues:{term:n.term,friend:String(n.friend)},validate:v,onSubmit:function(n,i){var r=i.setSubmitting,s={term:n.term,friend:"null"===n.friend?null:"true"===n.friend};setTimeout((function(){e.onFilterChanged(s),r(!1)}),400)},children:function(e){var n=e.isSubmitting;return(0,j.jsxs)(x.l0,{children:[(0,j.jsx)(x.gN,{className:"find-friends__search-form__text-input",type:"text",placeholder:"find users by name...",name:"term"}),(0,j.jsxs)(x.gN,{className:"find-friends__search-form__select",name:"friend",as:"select",children:[(0,j.jsx)("option",{value:"null",children:"All"}),(0,j.jsx)("option",{value:"true",children:"Only followed"}),(0,j.jsx)("option",{value:"false",children:"Only unfollowed"})]}),(0,j.jsx)("button",{className:"find-friends__search-form__btn btn _hover",type:"submit",disabled:n,children:"Find"})]})}})})})),N=i(6394),P=(0,t.memo)((function(e){var n=e.user,i=n.id,r=n.photos,s=n.followed,t=n.name,l=n.status,o=e.followingInProgress,c=e.unfollow,f=e.follow;return(0,j.jsx)("section",{className:"find-friends__profile__container",children:(0,j.jsxs)("div",{className:"find-friends__profile__inner",children:[(0,j.jsxs)("div",{className:"find-friends__profile__img-name__wrapper",children:[(0,j.jsx)(a.OL,{className:"",to:"/Profile/"+i,children:(0,j.jsx)("img",{src:null!=r.small?r.small:N,className:"find-friends__profile__img",alt:"avatar"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)(a.OL,{className:"",to:"/Profile/"+i,children:(0,j.jsx)("p",{className:"find-friends__profile__name",children:t})}),(0,j.jsx)("p",{className:"find-friends__profile__status",children:null!=l?l:"Hi guys! Tomorrow I will be boarding, who is with me?"})]})]}),(0,j.jsx)("div",{children:s?(0,j.jsx)("button",{disabled:o.some((function(e){return e===i})),onClick:function(){c(i)},className:"find-friends__profile__add-btn btn _hover",children:"Unfollow"}):(0,j.jsx)("button",{disabled:o.some((function(e){return e===i})),onClick:function(){f(i)},className:"find-friends__profile__add-btn btn _hover",children:"Follow"})})]})})})),C=(0,t.memo)((function(e){for(var n=e.totalItemsCount,i=e.pageSize,r=e.currentPage,s=e.onPageChanged,t=e.halfPortionSize,a=void 0===t?5:t,l=Math.ceil(n/i),o=[],c=1;c<=l;c++)o.push(c);var f=r-a<0?0:r-a,u=r+a,d=o.slice(f,u);return(0,j.jsx)("div",{className:"pagination__container",children:d.map((function(e){return(0,j.jsx)("div",{className:"pagination__page",children:(0,j.jsx)("span",{className:r===e?"pagination__selected-page _hover":"",onClick:function(n){s(e)},children:e},e)},e)}))})})),w=(0,t.memo)((function(e){var n=e.currentPage,i=e.pageSize,r=e.filter,s=(0,h.C)(o),t=(0,h.C)(f),a=(0,h.C)(m),c=(0,h.T)(),u=function(e){c((0,l.D7)({actualPage:e,pageSize:i,actualFilter:r}))},d=function(e){c((0,l.gO)(e))},_=function(e){c((0,l.kW)(e))},g=s.map((function(e){return(0,j.jsx)(P,{user:e,follow:d,unfollow:_,followingInProgress:a},e.id)}));return(0,j.jsxs)("main",{className:"find-friends__container",children:[(0,j.jsx)("h2",{className:"main-page__h2",children:"USERS"}),(0,j.jsx)("div",{className:"find-friends__wrapper",children:(0,j.jsxs)("section",{className:"find-friends__inner",children:[(0,j.jsx)(b,{onFilterChanged:function(e){c((0,l.D7)({actualPage:1,pageSize:i,actualFilter:e}))}}),(0,j.jsx)("div",{className:"find-friends__item__inner",children:g}),(0,j.jsx)("button",{className:"find-friends__next-page-btn btn _hover",onClick:function(e){u(n+1)},children:"Show more"}),(0,j.jsx)(C,{totalItemsCount:t,pageSize:i,currentPage:n,onPageChanged:u})]})})]})})),S=(0,t.memo)((function(){var e=(0,h.C)(d),n=(0,h.C)(_),i=(0,h.C)(c),o=(0,h.C)(u),f=(0,h.T)(),m=(0,a.lr)(),g=(0,s.Z)(m,2),x=g[0],v=g[1];return(0,t.useEffect)((function(){var e=x.get("page"),s=x.get("term")||"",t=x.get("friend"),a=o,c=n;e&&(a=Number(e)),s&&(c=(0,r.Z)((0,r.Z)({},c),{},{term:s})),t&&(c=(0,r.Z)((0,r.Z)({},c),{},{friend:"null"===t?null:"true"===t})),f((0,l.D7)({actualPage:a,pageSize:i,actualFilter:c}))}),[f,i,x]),(0,t.useEffect)((function(){var e={};n.term&&(e.term=n.term),null!==n.friend&&(e.friend=String(n.friend)),1!==o&&(e.page=String(o)),v(e)}),[n,o,v]),e?(0,j.jsx)(p.Z,{}):(0,j.jsx)(w,{currentPage:o,pageSize:i,filter:n})})),z=(0,g.h)(S)}}]);
//# sourceMappingURL=438.03ef20f6.chunk.js.map