"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[337],{1337:function(e,n,r){r.r(n),r.d(n,{default:function(){return S}});var t=r(1413),i=r(885),s=r(2791),a=r(6731),o=r(4735),l=r(7458),c=function(e){return e.usersPage.usersData},u=function(e){return e.usersPage.pageSize},f=function(e){return e.usersPage.totalUsersCount},d=function(e){return e.usersPage.setCurrentPage},m=function(e){return e.usersPage.isFetching},p=function(e){return e.usersPage.followingInProgress},_=function(e){return e.usersPage.filter},g=r(2312),h=r(5252),v=r(2506),x=r(184),j=function(e){return{}},w=(0,s.memo)((function(e){var n=(0,o.C)(_);return(0,x.jsx)("section",{className:"find-friends__search-form__container",children:(0,x.jsx)(v.J9,{enableReinitialize:!0,initialValues:{term:n.term,friend:String(n.friend)},validate:j,onSubmit:function(n,r){var t=r.setSubmitting,i={term:n.term,friend:"null"===n.friend?null:"true"===n.friend};setTimeout((function(){e.onFilterChanged(i),t(!1)}),400)},children:function(e){var n=e.isSubmitting;return(0,x.jsxs)(v.l0,{children:[(0,x.jsx)(v.gN,{className:"find-friends__search-form__text-input",type:"text",placeholder:"find users by name...",name:"term"}),(0,x.jsxs)(v.gN,{className:"find-friends__search-form__select",name:"friend",as:"select",children:[(0,x.jsx)("option",{value:"null",children:"All"}),(0,x.jsx)("option",{value:"true",children:"Only followed"}),(0,x.jsx)("option",{value:"false",children:"Only unfollowed"})]}),(0,x.jsx)("button",{className:"find-friends__search-form__btn btn _hover",type:"submit",disabled:n,children:"Find"})]})}})})})),b=r(6029),N=(0,s.memo)((function(e){var n=e.user,r=n.id,t=n.photos,i=n.followed,s=n.name,o=n.status,l=e.followingInProgress,c=e.unfollow,u=e.follow;return(0,x.jsx)("section",{className:"find-friends__profile__container",children:(0,x.jsxs)("div",{className:"find-friends__profile__inner",children:[(0,x.jsxs)("div",{className:"find-friends__profile__img-name__wrapper",children:[(0,x.jsx)(a.OL,{className:"",to:"/Profile/"+r,children:(0,x.jsx)("img",{src:null!=t.small?t.small:b,className:"find-friends__profile__img",alt:"avatar"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)(a.OL,{className:"",to:"/Profile/"+r,children:(0,x.jsx)("p",{className:"find-friends__profile__name",children:s})}),(0,x.jsx)("p",{className:"find-friends__profile__status",children:null!=o?o:"Hi guys! Tomorrow I will be boarding, who is with me?"})]})]}),(0,x.jsx)("div",{children:i?(0,x.jsx)("button",{disabled:l.some((function(e){return e===r})),onClick:function(){c(r)},className:"find-friends__profile__add-btn btn _hover",children:"Unfollow"}):(0,x.jsx)("button",{disabled:l.some((function(e){return e===r})),onClick:function(){u(r)},className:"find-friends__profile__add-btn btn _hover",children:"Follow"})})]})})})),P=(0,s.memo)((function(e){for(var n=e.totalItemsCount,r=e.pageSize,t=e.currentPage,i=e.onPageChanged,s=e.halfPortionSize,a=void 0===s?5:s,o=Math.ceil(n/r),l=[],c=1;c<=o;c++)l.push(c);var u=t-a<0?0:t-a,f=t+a,d=l.slice(u,f);return(0,x.jsx)("div",{className:"pagination__container",children:d.map((function(e){return(0,x.jsx)("div",{className:"pagination__page",children:(0,x.jsx)("span",{className:t===e?"pagination__selected-page _hover":"",onClick:function(n){i(e)},children:e},e)},e)}))})})),C=(0,s.memo)((function(e){var n=e.currentPage,r=e.pageSize,t=e.filter,i=(0,o.C)(c),s=(0,o.C)(f),a=(0,o.C)(p),u=(0,o.T)(),d=function(e){u((0,l.D7)({actualPage:e,pageSize:r,actualFilter:t}))},m=function(e){u((0,l.gO)(e))},_=function(e){u((0,l.kW)(e))},g=i.map((function(e){return(0,x.jsx)(N,{user:e,follow:m,unfollow:_,followingInProgress:a},e.id)}));return(0,x.jsxs)("main",{className:"find-friends__container",children:[(0,x.jsx)("h2",{className:"main-page__h2",children:"USERS"}),(0,x.jsx)("div",{className:"find-friends__wrapper",children:(0,x.jsxs)("section",{className:"find-friends__inner",children:[(0,x.jsx)(w,{onFilterChanged:function(e){u((0,l.D7)({actualPage:1,pageSize:r,actualFilter:e}))}}),(0,x.jsx)("div",{className:"find-friends__item__inner",children:g}),(0,x.jsx)("button",{className:"find-friends__next-page-btn btn _hover",onClick:function(e){d(n+1)},children:"Show more"}),(0,x.jsx)(P,{totalItemsCount:s,pageSize:r,currentPage:n,onPageChanged:d})]})})]})})),Z=(0,s.memo)((function(){var e=(0,o.C)(m),n=(0,o.C)(_),r=(0,o.C)(u),c=(0,o.C)(d),f=(0,o.T)(),p=(0,a.lr)(),g=(0,i.Z)(p,2),v=g[0],j=g[1];return(0,s.useEffect)((function(){var e=v.get("page"),i=v.get("term")||"",s=v.get("friend"),a=c,o=n;e&&(a=Number(e)),i&&(o=(0,t.Z)((0,t.Z)({},o),{},{term:i})),s&&(o=(0,t.Z)((0,t.Z)({},o),{},{friend:"null"===s?null:"true"===s})),f((0,l.D7)({actualPage:a,pageSize:r,actualFilter:o}))}),[f,r,v]),(0,s.useEffect)((function(){var e={};n.term&&(e.term=n.term),null!==n.friend&&(e.friend=String(n.friend)),1!==c&&(e.page=String(c)),j(e)}),[n,c,j]),e?(0,x.jsx)(h.Z,{}):(0,x.jsx)(C,{currentPage:c,pageSize:r,filter:n})})),S=(0,g.h)(Z)},7458:function(e,n,r){r.d(n,{D7:function(){return c},gO:function(){return f},kW:function(){return d}});var t=r(4165),i=r(5861),s=r(6382),a=r(7047),o=r(343),l=r(2207),c=(0,s.hg)("users/requestUsers",function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n,r){var i,s,o,c,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.actualPage,s=n.pageSize,o=n.actualFilter,c=r.dispatch,e.prev=2,c((0,a.MO)(!0)),c((0,a.D4)(i)),c((0,a.Tv)(o)),e.next=8,l.T.getUser(i,s,o.term,o.friend);case 8:u=e.sent,c((0,a.MO)(!1)),c((0,a.HM)(u.items)),c((0,a.K1)(u.totalCount)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.warn(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(n,r){return e.apply(this,arguments)}}()),u=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n,r,i,s){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n((0,a.ZH)({inProgress:!0,userId:r})),e.next=4,i(r);case 4:e.sent.resultCode===o.Rs.Success&&n(s(r)),n((0,a.ZH)({inProgress:!1,userId:r})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n,r,t,i){return e.apply(this,arguments)}}(),f=(0,s.hg)("users/getFollow",function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n,r){var i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.dispatch,e.next=3,u(i,n,l.T.follow.bind(l.T),a.ZN);case 3:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()),d=(0,s.hg)("users/getUnfollow",function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n,r){var i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.dispatch,e.next=3,u(i,n,l.T.unfollow.bind(l.T),a.fv);case 3:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}())}}]);
//# sourceMappingURL=337.8d4fd6ff.chunk.js.map