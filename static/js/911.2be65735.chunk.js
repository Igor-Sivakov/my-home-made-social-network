"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[911],{9911:function(e,s,a){a.r(s),a.d(s,{default:function(){return g}});var t=a(2791),n=a(459),r=function(e){return e.chat.messages},c=function(e){return e.chat.status},i=a(2506),m=a(6482),o=a(4383),u=a(184),l=(0,t.memo)((function(){var e=(0,m.C)(c),s=(0,m.T)();return(0,u.jsx)(i.J9,{initialValues:{chat_message_form__text:""},validate:o.Ei,onSubmit:function(e,a){var t=a.resetForm,r=a.setSubmitting;e.chat_message_form__text&&setTimeout((function(){s((0,n.bG)(e.chat_message_form__text)),t({}),r(!1)}),400)},children:function(s){s.resetForm;var a=s.isSubmitting,t=s.handleChange;return(0,u.jsxs)(i.l0,{className:"chat_message_form__inner",children:[(0,u.jsx)(i.gN,{name:"chat_message_form__text",type:"text",onChange:t,placeholder:"Enter your message...",className:"chat-message-form__textarea"}),(0,u.jsx)(i.Bc,{name:"chat_message_form__text",component:"div",className:"_error"}),(0,u.jsx)("button",{type:"submit",disabled:"ready"!==e||a,className:"chat-message-form__btn btn _hover",children:"Send"})]})}})})),_=a(885),h=a(2826),f=(0,t.memo)((function(e){var s=e.message,a=s.photo,t=s.userName,n=s.message;return(0,u.jsxs)("div",{className:"chat-message__container",children:[(0,u.jsx)(h.Z,{avatar:a}),(0,u.jsxs)("div",{className:"chat-message__message__inner",children:[(0,u.jsx)("div",{className:"chat-message__user-name",children:t}),(0,u.jsx)("div",{className:"chat-message__message-text",children:n})]})]})})),d=(0,t.memo)((function(){var e=(0,m.C)(r),s=(0,t.useRef)(null),a=(0,t.useState)(!1),n=(0,_.Z)(a,2),c=n[0],i=n[1];return(0,t.useEffect)((function(){if(c){setTimeout((function(){var e;return null===(e=s.current)||void 0===e?void 0:e.scrollIntoView({block:"end",behavior:"smooth"})}),300)}}),[e,c]),(0,u.jsxs)("div",{className:"chat-messages-screen__container",onScroll:function(e){var s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<300?!c&&i(!0):c&&i(!1)},children:[e.map((function(e,s){return(0,u.jsx)(f,{message:e},s)})),(0,u.jsx)("div",{ref:s})]})})),g=(0,t.memo)((function(){var e=(0,m.T)(),s=(0,m.C)(c);return(0,t.useEffect)((function(){return e((0,n.iq)()),function(){e((0,n.t3)())}}),[]),(0,u.jsxs)("main",{className:"chat__container",children:[(0,u.jsx)("h2",{className:"main-page__h2",children:"CHAT"}),"error"===s&&(0,u.jsx)("div",{children:"Some error occured. Please refresh the page."}),(0,u.jsxs)("div",{className:"chat__inner",children:[(0,u.jsx)(d,{}),(0,u.jsx)(l,{})]})]})}))}}]);
//# sourceMappingURL=911.2be65735.chunk.js.map