"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[95],{8095:function(e,s,a){a.r(s),a.d(s,{default:function(){return y}});var t=a(885),i=a(2791),n=a(2506),l=a(4383),r=a(6482),o=a(9927),c=a(184),m=(0,i.memo)((function(e){var s=e.sendNewMessageBody,a=(0,r.C)(o.y5);return(0,c.jsx)(n.J9,{initialValues:{message_form__text:""},validate:l.wg,onSubmit:function(e,t){var i=t.setSubmitting,n=t.resetForm;e.message_form__text&&setTimeout((function(){var t=e.message_form__text,l=a.small;s({message:t,avatar:l}),n({}),i(!1)}),400)},children:function(e){var s=e.isSubmitting,a=(e.resetForm,e.handleChange);return(0,c.jsxs)(n.l0,{className:"dialogs-message-form__inner",children:[(0,c.jsx)(n.gN,{type:"text",name:"message_form__text",placeholder:"Enter your message...",onChange:a,className:"dialogs-message-form__textarea"}),(0,c.jsx)(n.Bc,{name:"message_form__text",component:"div",className:"_error"}),(0,c.jsx)("button",{type:"submit",disabled:s,className:"dialogs-message-form__btn btn _hover",children:"Send"})]})}})})),d=m,_=a(8722),u=a(4014),g=function(e){return e.dialogsPage.dialogsData},v=function(e){return e.dialogsPage.messagesData},x=a(6731),f=a(6394),h=(0,i.memo)((function(e){var s=e.state,a=s.name,t=s.photos;return(0,c.jsx)("li",{className:"dialogs-list__item__container",children:(0,c.jsxs)("div",{className:"dialogs-list__item__box-for-point",children:[(0,c.jsx)("div",{className:"dialogs-list__dot"}),(0,c.jsxs)(x.OL,{to:"/Dialogs",className:"dialogs-list__item__inner",children:[(0,c.jsx)("img",{src:t.small?t.small:f,className:"dialogs-list__avatar",alt:"avatar"}),(0,c.jsx)("p",{className:"dialogs-list__name",children:a})]})]})})})),j=a(2826),N=(0,i.memo)((function(e){var s=e.state,a=s.message,t=(s.name,s.avatar);return(0,c.jsx)("div",{className:"dialogs-invert-message__item__lean-to-the-left-board-box",children:(0,c.jsxs)("div",{className:"dialogs-invert-message__item__container",children:[(0,c.jsx)("div",{className:"dialogs-invert-message__item__text__inner",children:(0,c.jsx)("p",{className:"dialogs-invert-message__item__text",children:a})}),(0,c.jsx)(j.Z,{avatar:t})]})})})),p=(0,i.memo)((function(e){var s=e.state,a=s.message,t=s.avatar;s.name;return(0,c.jsxs)("div",{className:"dialogs-message__item__conatiner",children:[(0,c.jsx)(j.Z,{avatar:t}),(0,c.jsx)("div",{className:"dialogs-message__item__text__inner",children:(0,c.jsx)("p",{className:"dialogs-message__item__text",children:a})})]})})),b=a(7256),S=a(5033),w=(0,i.memo)((function(e){var s=e.dialog,a=e.setShowBtn,n=e.isActive,l=(0,i.useState)(!0),r=(0,t.Z)(l,2),o=r[0],m=r[1],d=(0,i.useState)(),_=(0,t.Z)(d,2),u=_[0],g=_[1];return(0,i.useEffect)((function(){n===s?(m(!0),a(null),clearTimeout(u)):(m(!0),clearTimeout(u))}),[n,s]),(0,c.jsx)("div",{onClick:function(){a(s),m(!1);var e=setTimeout((function(){m(!0),a(null)}),5e3);g(e)},children:o&&(0,c.jsx)(S.Z,{className:"dialogs-list__edit-toggler _visible"})})})),C=(0,i.memo)((function(){var e=(0,r.C)(g),s=(0,i.useState)(null),a=(0,t.Z)(s,2),n=a[0],l=a[1],o=(0,i.useState)(null),m=(0,t.Z)(o,2),d=m[0],u=m[1],v=(0,r.T)();return e.map((function(s){return(0,c.jsxs)("div",{onClick:function(){l(s)},className:"".concat(null===n?s===e[0]&&"_active":n===s&&"_active"),children:[!!s.followed&&(0,c.jsx)(h,{state:s}),d===s&&(0,c.jsxs)("button",{onClick:function(){var e=s.id;v((0,b.kW)(e));setTimeout((function(){return v((0,_.Eq)())}),500),u(null)},className:"dialogs-list__delete-dialog-btn btn _hover _visible",children:[(0,c.jsx)("div",{className:"dialogs-list__delete-dialog-btn__dot"}),(0,c.jsx)("span",{children:"delete dialog"})]}),(0,c.jsx)(w,{isActive:n,dialog:s,setShowBtn:u})]},s.id)}))})),T=function(){return(0,r.C)(v).map((function(e){for(var s=["2","5","7","3"],a=0;a<s.length;a++)if(s[a]===e.id)return(0,c.jsx)(N,{state:e},e.id);return(0,c.jsx)(p,{state:e},e.id)}))},k=(0,i.memo)((function(){var e=(0,r.C)(v),s=(0,i.useRef)(null),a=(0,i.useState)(!0),n=(0,t.Z)(a,2),l=n[0],o=n[1],m=(0,r.T)();(0,i.useEffect)((function(){if(l){setTimeout((function(){var e;return null===(e=s.current)||void 0===e?void 0:e.scrollIntoView({block:"end",behavior:"smooth"})}),300)}}),[e,l]),(0,i.useEffect)((function(){m((0,_.Eq)())}),[m]);return(0,c.jsxs)("main",{className:"dialogs__container",children:[(0,c.jsx)("h2",{className:"main-page__h2",children:"DIALOGS"}),(0,c.jsxs)("div",{className:"dialogs__wrapper",children:[(0,c.jsx)("section",{className:"dialogs-list__conteiner",children:(0,c.jsx)("div",{className:"dialogs-list__inner",children:(0,c.jsx)("ul",{children:(0,c.jsx)(C,{})})})}),(0,c.jsxs)("section",{className:"dialogs-messages__conteiner",children:[(0,c.jsxs)("div",{onScroll:function(e){var s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<300?!l&&o(!0):l&&o(!1)},className:"dialogs-messages__chat-conteiner",children:[(0,c.jsx)(T,{}),(0,c.jsx)("div",{ref:s})]}),(0,c.jsx)(d,{sendNewMessageBody:function(e){var s=e.message,a=e.avatar;m((0,_.ww)({message:s,avatar:a}))}})]})]})]})})),y=(0,u.h)(k)}}]);
//# sourceMappingURL=95.6ee699ba.chunk.js.map