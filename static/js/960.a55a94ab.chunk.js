"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[960],{8960:function(e,s,a){a.r(s),a.d(s,{default:function(){return y}});var t=a(885),i=a(2791),n=a(8722),l=function(e){return e.dialogsPage.dialogsData},r=function(e){return e.dialogsPage.messagesData},o=a(4014),c=a(6482),m=a(7256),_=a(6731),d=a(6394),u=a(184),g=(0,i.memo)((function(e){var s=e.state,a=s.name,t=s.photos;return(0,u.jsx)("li",{className:"dialogs-list__item__container",children:(0,u.jsxs)("div",{className:"dialogs-list__item__box-for-dot",children:[(0,u.jsx)("div",{className:"dialogs-list__item__dot"}),(0,u.jsxs)(_.OL,{to:"/Dialogs",className:"dialogs-list__item__inner",children:[(0,u.jsx)("img",{src:t.small?t.small:d,className:"dialogs-list__item__avatar",alt:"avatar"}),(0,u.jsx)("p",{className:"dialogs-list__item__name",children:a})]})]})})})),v=a(2826),x=(0,i.memo)((function(e){var s=e.state,a=s.message,t=(s.name,s.avatar);return(0,u.jsx)("div",{className:"dialogs-invert-message__item__lean-to-the-left-board-box",children:(0,u.jsxs)("div",{className:"dialogs-invert-message__item__container",children:[(0,u.jsx)("div",{className:"dialogs-invert-message__item__text__inner",children:(0,u.jsx)("p",{className:"dialogs-invert-message__item__text",children:a})}),(0,u.jsx)(v.Z,{avatar:t})]})})})),f=(0,i.memo)((function(e){var s=e.state,a=s.message,t=s.avatar;s.name;return(0,u.jsxs)("div",{className:"dialogs-message__item__conatiner",children:[(0,u.jsx)(v.Z,{avatar:t}),(0,u.jsx)("div",{className:"dialogs-message__item__text__inner",children:(0,u.jsx)("p",{className:"dialogs-message__item__text",children:a})})]})})),h=a(5033),j=(0,i.memo)((function(e){var s=e.dialog,a=e.setShowBtn,n=e.isActive,l=(0,i.useState)(!0),r=(0,t.Z)(l,2),o=r[0],c=r[1],m=(0,i.useState)(),_=(0,t.Z)(m,2),d=_[0],g=_[1];return(0,i.useEffect)((function(){n===s?(c(!0),a(null),clearTimeout(d)):(c(!0),clearTimeout(d))}),[n,s]),(0,u.jsx)("div",{onClick:function(){a(s),c(!1);var e=setTimeout((function(){c(!0),a(null)}),5e3);g(e)},children:o&&(0,u.jsx)(h.Z,{className:"dialogs-list__edit-toggler _visible"})})})),N=(0,i.memo)((function(){var e=(0,c.C)(l),s=(0,i.useState)(null),a=(0,t.Z)(s,2),r=a[0],o=a[1],_=(0,i.useState)(null),d=(0,t.Z)(_,2),v=d[0],x=d[1],f=(0,c.T)();return e.map((function(s){return(0,u.jsxs)("div",{onClick:function(){o(s)},style:{height:"70px"},className:"".concat(null===r?s===e[0]&&" _active":r===s&&" _active"),children:[!!s.followed&&(0,u.jsx)(g,{state:s}),v===s&&(0,u.jsxs)("button",{onClick:function(){var e=s.id;f((0,m.kW)(e));setTimeout((function(){return f((0,n.Eq)())}),500),x(null)},className:"dialogs-list__delete-dialog-btn btn _hover _visible",children:[(0,u.jsx)("div",{className:"dialogs-list__delete-dialog-btn__dot"}),(0,u.jsx)("span",{children:"delete dialog"})]}),(0,u.jsx)(j,{isActive:r,dialog:s,setShowBtn:x})]},s.id)}))})),p=function(){return(0,c.C)(r).map((function(e){for(var s=["2","5","7","3"],a=0;a<s.length;a++)if(s[a]===e.id)return(0,u.jsx)(x,{state:e},e.id);return(0,u.jsx)(f,{state:e},e.id)}))},b=a(2506),S=a(9927),w=a(4383),C=(0,i.memo)((function(e){var s=e.sendNewMessageBody,a=(0,c.C)(S.y5);return(0,u.jsx)(b.J9,{initialValues:{message_form__text:""},validate:w.wg,onSubmit:function(e,t){var i=t.setSubmitting,n=t.resetForm;e.message_form__text&&setTimeout((function(){var t=e.message_form__text,l=a.small;s({message:t,avatar:l}),n({}),i(!1)}),400)},children:function(e){var s=e.isSubmitting,a=(e.resetForm,e.handleChange);return(0,u.jsxs)(b.l0,{className:"dialogs-message-form__inner",children:[(0,u.jsx)(b.gN,{type:"text",name:"message_form__text",placeholder:"Enter your message...",onChange:a,className:"dialogs-message-form__textarea"}),(0,u.jsx)(b.Bc,{name:"message_form__text",component:"div",className:"_error"}),(0,u.jsx)("button",{type:"submit",disabled:s,className:"dialogs-message-form__btn btn _hover",children:"Send"})]})}})})),T=C,k=(0,i.memo)((function(){var e=(0,c.C)(r),s=(0,i.useRef)(null),a=(0,i.useState)(!0),l=(0,t.Z)(a,2),o=l[0],m=l[1],_=(0,c.T)();(0,i.useEffect)((function(){if(o){setTimeout((function(){var e;return null===(e=s.current)||void 0===e?void 0:e.scrollIntoView({block:"end",behavior:"smooth"})}),300)}}),[e,o]),(0,i.useEffect)((function(){_((0,n.Eq)())}),[_]);return(0,u.jsxs)("main",{className:"dialogs__container",children:[(0,u.jsx)("h2",{className:"main-page__h2",children:"DIALOGS"}),(0,u.jsxs)("div",{className:"dialogs__wrapper",children:[(0,u.jsx)("section",{className:"dialogs-list__conteiner",children:(0,u.jsx)("div",{className:"dialogs-list__inner",children:(0,u.jsx)("ul",{children:(0,u.jsx)(N,{})})})}),(0,u.jsxs)("section",{className:"dialogs-messages__conteiner",children:[(0,u.jsxs)("div",{onScroll:function(e){var s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<300?!o&&m(!0):o&&m(!1)},className:"dialogs-messages__chat-conteiner",children:[(0,u.jsx)(p,{}),(0,u.jsx)("div",{ref:s})]}),(0,u.jsx)(T,{sendNewMessageBody:function(e){var s=e.message,a=e.avatar;_((0,n.ww)({message:s,avatar:a}))}})]})]})]})})),y=(0,o.h)(k)}}]);
//# sourceMappingURL=960.a55a94ab.chunk.js.map